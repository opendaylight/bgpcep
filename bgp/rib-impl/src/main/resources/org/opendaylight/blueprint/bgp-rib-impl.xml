<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
                 xmlns:odl="http://opendaylight.org/xmlns/blueprint/v1.0.0"
                 xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0"
                 odl:use-default-for-reference-types="true">

  <reference id="dataBroker" interface="org.opendaylight.controller.md.sal.binding.api.DataBroker" odl:type="pingpong"/>
  <reference id="globalBgpExtensions" interface="org.opendaylight.protocol.bgp.rib.spi.RIBExtensionProviderContext"/>
  <reference id="globalBgpDispatcher" interface="org.opendaylight.protocol.bgp.rib.impl.spi.BGPDispatcher"/>
  <reference id="bgpOpenConfigMappingService" interface="org.opendaylight.protocol.bgp.openconfig.spi.BGPOpenConfigMappingService"/>
  <reference id="codecTreeFactory" interface="org.opendaylight.yangtools.binding.data.codec.api.BindingCodecTreeFactory"/>
  <reference id="domDataBroker" interface="org.opendaylight.controller.md.sal.dom.api.DOMDataBroker"/>
  <reference id="schemaService" interface="org.opendaylight.controller.sal.core.api.model.SchemaService"/>
  <reference id="rpcRegistry" interface="org.opendaylight.controller.sal.binding.api.RpcProviderRegistry"/>
  <reference id="globalPeerRegistry" interface="org.opendaylight.protocol.bgp.rib.impl.spi.BGPPeerRegistry"/>

  <bean id="bgpDeploymentManager" class="org.opendaylight.protocol.bgp.rib.impl.config.BgpDeploymentManager" scope=”prototype”>
    <argument ref="globalBgpExtensions"/>
    <argument ref="globalBgpDispatcher"/>
    <argument ref="bgpOpenConfigMappingService"/>
    <argument ref="codecTreeFactory"/>
    <argument ref="dataBroker"/>
    <argument ref="domDataBroker"/>
    <argument ref="schemaService"/>
    <argument ref="rpcRegistry"/>
    <argument ref="globalPeerRegistry"/>
  </bean>

  <bean id="bgpDeployerDefault" class="org.opendaylight.protocol.bgp.rib.impl.config.BgpConfigurationService" destroy-method="close">
    <argument ref="bgpDeploymentManager"/>
  </bean>

</blueprint>