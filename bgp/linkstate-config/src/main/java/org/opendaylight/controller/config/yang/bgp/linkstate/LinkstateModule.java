/**
 * Generated file

 * Generated from: yang module name: config-bgp-linkstate  yang module local name: bgp-linkstate
 * Generated by: org.opendaylight.controller.config.yangjmxgenerator.plugin.JMXGenerator
 * Generated at: Sat Nov 16 08:52:43 CET 2013
 *
 * Do not modify this file unless it is present under src/main directory
 */
package org.opendaylight.controller.config.yang.bgp.linkstate;

import org.opendaylight.protocol.bgp.linkstate.BGPActivator;
import org.opendaylight.protocol.bgp.linkstate.RIBActivator;
import org.opendaylight.protocol.bgp.parser.spi.BGPExtensionProviderActivator;
import org.opendaylight.protocol.bgp.rib.spi.RIBExtensionProviderActivator;
import org.opendaylight.protocol.bgp.rib.spi.RIBExtensionProviderContext;

/**
 *
 */
public final class LinkstateModule extends org.opendaylight.controller.config.yang.bgp.linkstate.AbstractLinkstateModule
{

	public LinkstateModule(final org.opendaylight.controller.config.api.ModuleIdentifier identifier, final org.opendaylight.controller.config.api.DependencyResolver dependencyResolver) {
		super(identifier, dependencyResolver);
	}

	public LinkstateModule(final org.opendaylight.controller.config.api.ModuleIdentifier identifier, final org.opendaylight.controller.config.api.DependencyResolver dependencyResolver, final LinkstateModule oldModule, final java.lang.AutoCloseable oldInstance) {
		super(identifier, dependencyResolver, oldModule, oldInstance);
	}

	@Override
	public void validate(){
		super.validate();
		// Add custom validation for module attributes here.
	}

	@Override
	public java.lang.AutoCloseable createInstance() {
		final RIBExtensionProviderContext ribctx = getRibExtensionsDependency();
		final RIBExtensionProviderActivator ribact;
		if (ribctx != null) {
			ribact = new RIBActivator();
			ribact.startRIBExtensionProvider(ribctx);
		} else {
			ribact = null;
		}

		final BGPExtensionProviderActivator bgpact;
		if (getBgpExtensionsDependency() != null) {
			bgpact = new BGPActivator();
			bgpact.start(getBgpExtensionsDependency());
		} else {
			bgpact = null;
		}

		return new AutoCloseable() {
			@Override
			public void close() {
				if (bgpact != null) {
					bgpact.stop();
				}
				if (ribact != null) {
					ribact.stopRIBExtensionProvider();
				}
			}
		};
	}
}
