<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2018 AT&T Intellectual Property. All rights reserved.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License v1.0 which accompanies this distribution,
  ~ and is available at http://www.eclipse.org/legal/epl-v10.html
-->

<!-- vi: set et smarttab sw=4 tabstop=4: -->

<routing-policy xmlns="http://openconfig.net/yang/routing-policy">
    <policy-definitions>
        <policy-definition>
            <name>default-odl-import-policy</name>
            <statements>
                <statement>
                    <name>from-external</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ebgp</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                    </conditions>
                    <actions>
                        <from-external-import-actions xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy"/>
                    </actions>
                </statement>
                <statement>
                    <name>from-non-external</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ebgp</role>
                                <match-set-options>INVERT</match-set-options>
                            </match-role-set>
                        </neighbor-announcer-condition>
                    </conditions>
                    <actions>
                        <from-non-external-import-actions xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy"/>
                    </actions>
                </statement>
            </statements>
        </policy-definition>
        <policy-definition>
            <name>default-odl-export-policy</name>
            <statements>
                <statement>
                    <name>to-odl-internal</name>
                    <conditions>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>internal</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <reject-route/>
                    </actions>
                </statement>
                <statement>
                    <name>to-external</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ebgp</role>
                                <role>ibgp</role>
                                <role>rr-client</role>
                                <role>internal</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ebgp</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <to-external-export-actions xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy"/>
                    </actions>
                </statement>
                <statement>
                    <name>from-internal-to-internal</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ibgp</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ibgp</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <reject-route/>
                    </actions>
                </statement>
                <statement>
                    <name>from-external-to-internal</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ebgp</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ibgp</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <accept-route/>
                    </actions>
                </statement>
                <statement>
                    <name>from-odl-internal-to-internal-or-rr-client</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>internal</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ibgp</role>
                                <role>rr-client</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <reflect-attributes-from-odl-internal-actions xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy"/>
                    </actions>
                </statement>
                <statement>
                    <name>from-rr-client-to-internal</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>rr-client</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ibgp</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <reflect-attributes-actions xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy"/>
                    </actions>
                </statement>
                <statement>
                    <name>from-external-to-route-reflector</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ebgp</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>rr-client</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <accept-route/>
                    </actions>
                </statement>
                <statement>
                    <name>from-internal-or-rr-client-to-route-reflector</name>
                    <conditions>
                        <neighbor-announcer-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>ibgp</role>
                                <role>rr-client</role>
                            </match-role-set>
                        </neighbor-announcer-condition>
                        <neighbor-announced-condition xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                            <match-role-set xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy">
                                <role>rr-client</role>
                            </match-role-set>
                        </neighbor-announced-condition>
                    </conditions>
                    <actions>
                        <reflect-attributes-actions xmlns="urn:opendaylight:params:xml:ns:yang:odl:bgp:default:policy"/>
                    </actions>
                </statement>
            </statements>
        </policy-definition>
    </policy-definitions>
</routing-policy>